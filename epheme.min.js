if(!org)var org={};if(!org.epheme)org.epheme={};
(function(w){function C(d,g,f){for(var c=0,b=d.length;c<b;++c)d[c].impl(g,f)}function L(d,g){var f=d.length,c=u.qualify(this.name),b=this.value,a=typeof b=="function"&&b;if(c.space)if(b==null)for(a=0;a<f;++a)d[a].removeAttributeNS(c.space,c.local);else if(a)for(a=0;a<f;++a){o[0]=g[a];var e=d[a],h=b.apply(null,o);h==null?e.removeAttributeNS(c.space,c.local):e.setAttributeNS(c.space,c.local,h)}else for(a=0;a<f;++a)d[a].setAttributeNS(c.space,c.local,b);else if(b==null)for(a=0;a<f;++a)d[a].removeAttribute(c);
else if(a)for(a=0;a<f;++a){o[0]=g[a];e=d[a];h=b.apply(null,o);h==null?e.removeAttribute(c):e.setAttribute(c,h)}else for(a=0;a<f;++a)d[a].setAttribute(c,b)}function M(d,g){var f=d.length,c=u.qualify(this.name),b=this.value,a=typeof b=="function"&&b,e=this.priority;if(b==null)for(a=0;a<f;++a)d[a].style.removeProperty(c);else if(a)for(a=0;a<f;++a){o[0]=g[a];var h=d[a],p=b.apply(null,o);p==null?h.style.removeProperty(c):h.style.setProperty(c,p,e)}else for(a=0;a<f;++a)d[a].style.setProperty(c,b,e)}function N(d,
g){var f=d.length,c=u.qualify(this.name),b=[];if(c.space)for(var a=0;a<f;++a)b.push(d[a].appendChild(document.createElementNS(c.space,c.local)));else if(c=="#text"){c=this.value;if(typeof c=="function"&&c)for(a=0;a<f;++a){o[0]=g[a];var e=d[a],h=c.apply(null,o);b.push(e.appendChild(document.createTextNode(h)))}else for(a=0;a<f;++a)b.push(d[a].appendChild(document.createTextNode(c)))}else for(a=0;a<f;++a)b.push(d[a].appendChild(document.createElement(c)));C(this.actions,b,g)}function O(d){for(var g=
d.length,f=this.expression,c=null,b,a=0;a<g;++a){c=f.evaluate(d[a],XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,c);for(var e=0,h=c.snapshotLength;e<h;e++){b=c.snapshotItem(e);b.parentNode.removeChild(b)}}}function P(d,g){var f=d.length,c=this.value;if(typeof c=="function"&&c)for(var b=0;b<f;++b){o[0]=g[b];var a=d[b],e=c.apply(null,o);a.nodeValue=e}else for(b=0;b<f;++b)d[b].nodeValue=c}function Q(d,g){var f=[],c=d.length,b=this.expression,a=null,e;o.unshift(null);for(var h=0;h<c;++h){for(a=b.evaluate(d[h],
XPathResult.UNORDERED_NODE_ITERATOR_TYPE,a);(e=a.iterateNext())!=null;)f.push(e);o[1]=e=g[h];C(this.actions,f,e==null?A:e);f.length=0}o.shift()}function R(d,g){var f=this.value,c=d.length,b=f;if(typeof b=="function"){f=[];for(var a=0;a<c;++a){o[0]=g[a];f.push(b.apply(null,o))}}C(this.actions,d,f)}function x(d,g){var f={},c;if(arguments.length<2)g=A;c=typeof d=="string"?D(d,document,[]):d instanceof Array?d.slice():[d];f.select=function(b){return x.apply(null,H(c,g,b))};f.add=function(b){b=u.qualify(b);
var a=[];if(b.space)for(var e=0;e<c.length;e++)a.push(c[e].appendChild(document.createElementNS(b.space,b.local)));else for(e=0;e<c.length;e++)a.push(c[e].appendChild(document.createElement(b)));return x(a,g)};f.remove=function(){for(var b=0;b<c.length;b++){var a=c[b];a.parentNode&&a.parentNode.removeChild(a)}return f};f.attr=function(b,a){b=u.qualify(b);if(arguments.length<2)return c.length?b.space?c[0].getAttributeNS(b.space,b.local):c[0].getAttribute(b):null;if(b.space)if(a==null)for(var e=0;e<
c.length;e++)c[e].removeAttributeNS(b.space,b.local);else if(typeof a=="function")for(e=0;e<c.length;e++){var h=c[e],p=a.call(f,g[e],e);p==null?h.removeAttributeNS(b.space,b.local):h.setAttributeNS(b.space,b.local,p)}else for(e=0;e<c.length;e++)c[e].setAttributeNS(b.space,b.local,a);else if(a==null)for(e=0;e<c.length;e++)c[e].removeAttribute(b);else if(typeof a=="function")for(e=0;e<c.length;e++){h=c[e];p=a.call(f,g[e],e);p==null?h.removeAttribute(b):h.setAttribute(b,p)}else for(e=0;e<c.length;e++)c[e].setAttribute(b,
a);return f};f.style=function(b,a,e){if(arguments.length<2)return c.length?c[0].style.getPropertyValue(b):null;if(arguments.length<3)e=null;if(a==null)for(var h=0;h<c.length;h++)c[h].style.removeProperty(b);else if(typeof a=="function")for(h=0;h<c.length;h++){var p=c[h],r=a.call(f,g[h],h);r==null?p.style.removeProperty(b):p.style.setProperty(b,r,e)}else for(h=0;h<c.length;h++)c[h].style.setProperty(b,a,e);return f};f.text=function(b){if(!arguments.length)return c.length&&c[0].firstChild?c[0].firstChild.nodeValue:
null;if(b==null)for(var a=0;a<c.length;a++){var e=c[a];e.firstChild&&e.removeChild(e.firstChild)}else if(typeof b=="function")for(a=0;a<c.length;a++){e=c[a];var h=b.call(f,g[a],a);if(h==null)e.firstChild&&e.removeChlid(e.firstChild);else if(e.firstChild)e.firstChild.nodeValue=h;else e.appendChild(document.createTextNode(h))}else for(a=0;a<c.length;a++){e=c[a];if(e.firstChild)e.firstChild.nodeValue=b;else e.appendChild(document.createTextNode(b))}return f};f.length=function(){return c.length};f.item=
function(b){return c[b]};f.transition=function(){return S().select(c,g)};return f}function D(d,g,f){for(g=document.evaluate(d,g,u.resolve,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null);(d=g.iterateNext())!=null;)f.push(d);return f}function H(d,g,f){var c=[],b=A;if(typeof f=="string")if(g===A)for(var a=0;a<d.length;a++)D(f,d[a]||document,c);else{b=[];for(var e=a=0;a<d.length;a++){D(f,d[a]||document,c);for(var h=g[a];e<c.length;e++)b.push(h)}}else if(typeof f=="number"){c.push(d[f]);b=g===A?A:g[f]}else c=
f;return[c,b]}function S(){function d(){B=0;y=Date.now();g();h.dispatch({type:"start"});E=setInterval(g,p)}function g(){for(var i=(Date.now()-y)/v,j=z(i<0?0:i>1?1:i);j>=n[n.length-1].t;)n.pop().f();for(var k=0;k<F.length;k++)F[k](j);if(i>=1){clearInterval(E);E=0;h.dispatch({type:"end"})}}function f(i,j){i=String(i).split(I);var k=String(j).split(I);if(i.length===k.length){var m=i.map(parseFloat),l=k.map(parseFloat);if(!(m.every(isNaN)||l.every(isNaN)))return function(s){for(var q=0;q<m.length;q++)if(!isNaN(m[q])&&
!isNaN(l[q]))k[q]=m[q]*(1-s)+l[q]*s;return k.join("")}}}function c(i,j,k){j=u.qualify(j);var m=f(j.space?i.getAttributeNS(j.space,j.local):i.getAttribute(j),k);m?F.push(j.space?function(l){i.setAttributeNS(j.space,j.local,m(l))}:function(l){i.setAttribute(j,m(l))}):n.push({t:0.5,f:j.space?function(){i.setAttributeNS(j.space,j.local,k)}:function(){i.setAttribute(j,k)}})}function b(i,j,k,m){n.push({t:0.5,f:function(){x(i).style(j,k,m)}})}function a(i,j){n.push({t:0.5,f:function(){x(i).text(j)}})}var e=
{},h={},p=24,r=p,v=250,z=w.ease("cubic-in-out"),y,n=[{t:NaN}],F=[],B,E;B=setTimeout(d,r);w.dispatch(h);h.duration=function(i){if(!arguments.length)return v;v=i;return this};h.delay=function(i){if(!arguments.length)return r;r=i;if(B){clearInterval(B);B=setTimeout(d,r)}return this};h.ease=function(i){if(!arguments.length)return z;z=typeof i=="string"?w.ease(i):i;return this};e.select=function(i,j){var k=Object.create(h);k.select=function(m){return e.select.apply(null,H(i,j,m))};k.attr=function(m,l){if(typeof l==
"function")for(var s=0;s<i.length;s++)c(i[s],m,l.call(k,j[s],s));else for(s=0;s<i.length;s++)c(i[s],m,l);return k};k.style=function(m,l,s){if(arguments.length<3)s=null;if(typeof l=="function")for(var q=0;q<i.length;q++)b(i[q],m,l.call(k,j[q],q),s);else for(q=0;q<i.length;q++)b(i[q],m,l,s);return k};k.text=function(m){if(typeof m=="function")for(var l=0;l<i.length;l++)a(i[l],m.call(k,j[l],l));else for(l=0;l<i.length;l++)a(i[l],m);return k};return k};return e}function J(d){return function(g){return 1-
d(1-g)}}function K(d){return function(g){return 0.5*(g<0.5?d(2*g):2-d(2-2*g))}}function T(){return t}function G(d){return function(g){return Math.pow(g,d)}}function U(d){return 1-Math.cos(d*Math.PI/2)}function V(d){return d?Math.pow(2,10*(d-1))-0.0010:0}function W(d){return 1-Math.sqrt(1-d*d)}function X(d,g){var f;if(arguments.length<2)g=0.45;if(arguments.length<1){d=1;f=g/4}else f=g/(2*Math.PI)*Math.asin(1/d);return function(c){return 1+d*Math.pow(2,10*-c)*Math.sin(-(c+f)*2*Math.PI/g)}}function Y(d){d||
(d=1.70158);return function(g){return g*g*((d+1)*g-d)}}function Z(d){return d<1/2.75?7.5625*d*d:d<2/2.75?7.5625*(d-=1.5/2.75)*d+0.75:d<2.5/2.75?7.5625*(d-=2.25/2.75)*d+0.9375:7.5625*(d-=2.625/2.75)*d+0.984375}w.version="0.0.0";var u={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},resolve:function(d){return u.prefix[d]||null},qualify:function(d){var g=
d.indexOf(":");return g<0?d:{space:u.prefix[d.substring(0,g)],local:d.substring(g+1)}}};w.dispatch=function(d){var g={};d.on=function(f,c){f=g[f]||(g[f]=[]);for(var b=0;b<f.length;b++)if(f[b].handler==c)return this;f.push({handler:c,on:true});return this};d.off=function(f,c){if(f=g[f])for(var b=0;b<f.length;b++){var a=f[b];if(a.handler==c){a.on=false;f.splice(b,1);break}}return this};d.dispatch=function(f){var c=g[f.type];if(c){c=c.slice();for(var b=0;b<c.length;b++){var a=c[b];a.on&&a.handler.call(d,
f)}}};return d};w.transform=function(){function d(c){var b=Object.create(g);b.data=function(a){a={impl:R,value:a,actions:[]};c.push(a);return d(a.actions)};b.attr=function(a,e){c.push({impl:L,name:a,value:e});return b};b.style=function(a,e,h){c.push({impl:M,name:a,value:e,priority:arguments.length<3?null:h});return b};b.add=function(a,e){a={impl:N,name:a,value:e,actions:[]};c.push(a);return d(a.actions)};b.remove=function(a){c.push({impl:O,expression:document.createExpression(a,u.resolve)});return b};
b.value=function(a){c.push({impl:P,value:a});return b};b.text=function(a){b.remove("text()").add("#text",a);return b};b.select=function(a){a={impl:Q,expression:document.createExpression(a,u.resolve),actions:[]};c.push(a);return d(a.actions)};return b}var g={},f=[];g.apply=function(){o.unshift(null);C(f,[document],A);o.shift();return g};return d(f)};var o=[],A={};w.select=function(d){return x(d)};A={};var I=/([-0-9.]+)/;w.map=function(d){var g={},f,c;w.dispatch(g);g.from=function(b){if(!arguments.length)return f;
f=b;return g};g.by=function(b){if(!arguments.length)return c;c=b;return g};g.apply=function(b){if(!arguments.length)b=g.dispatch;for(var a=[],e=[],h=[],p=[],r=0;r<d.length;r++){var v=d[r],z=x(c.call(g,v,r)),y=z.length();if(y)for(var n=0;n<y;n++){h.push(z.item(n));p.push(v)}else{a.push(null);e.push(v)}}v=[];z=x(f);r=0;a:for(;r<z.length();r++){y=z.item(r);for(n=0;n<a.length;n++)if(a[n]===y)continue a;for(n=0;n<h.length;n++)if(h[n]===y)continue a;v.push(y)}a.length&&g.dispatch({type:"enter",target:x(a,
e)});h.length&&g.dispatch({type:"update",target:x(h,p)});v.length&&g.dispatch({type:"exit",target:x(v)});return g};return g};var $=G(2),aa=G(3),ba={linear:function(){return T},poly:G,quad:function(){return $},cubic:function(){return aa},sin:function(){return U},exp:function(){return V},circle:function(){return W},elastic:X,back:Y,bounce:function(){return Z}},ca={"in":function(d){return d},out:J,"in-out":K,"out-int":function(d){return K(J(d))}};w.ease=function(d){var g=d.indexOf("-"),f=g>=0?d.substring(0,
g):d;g=g>=0?d.substring(g+1):"in";return ca[g](ba[f].apply(null,Array.prototype.slice.call(arguments,1)))}})(org.epheme);
