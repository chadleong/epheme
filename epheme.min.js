if(!org)var org={};if(!org.epheme)org.epheme={};
(function(v){function J(){var c=this.nodes,f=c.length,d=s.qualify(this.name),b=this.value,a=typeof b=="function"&&b;if(d.space)if(b==null)for(a=0;a<f;++a)c[a].removeAttributeNS(d.space,d.local);else if(a)for(a=0;a<f;++a){var e=c[a],g=b.call(e);g==null?e.removeAttributeNS(d.space,d.local):e.setAttributeNS(d.space,d.local,g)}else for(a=0;a<f;++a)c[a].setAttributeNS(d.space,d.local,b);else if(b==null)for(a=0;a<f;++a)c[a].removeAttribute(d);else if(a)for(a=0;a<f;++a){e=c[a];g=b.call(e);g==null?e.removeAttribute(d):
e.setAttribute(d,g)}else for(a=0;a<f;++a)c[a].setAttribute(d,b)}function K(){var c=this.nodes,f=c.length,d=s.qualify(this.name),b=this.value,a=typeof b=="function"&&b,e=this.priority;if(b==null)for(a=0;a<f;++a)c[a].style.removeProperty(d);else if(a)for(a=0;a<f;++a){var g=c[a],h=b.call(g);h==null?g.style.removeProperty(d):g.style.setProperty(d,h,e)}else for(a=0;a<f;++a)c[a].style.setProperty(d,b,e)}function L(){var c=this.nodes,f=c.length,d=s.qualify(this.name),b=this.results;b.length=0;if(d.space)for(var a=
0;a<f;++a)b.push(c[a].appendChild(document.createElementNS(d.space,d.local)));else if(d=="#text"){d=this.value;if(typeof d=="function"&&d)for(a=0;a<f;++a){var e=c[a],g=d.call(e);b.push(e.appendChild(document.createTextNode(g)))}else for(a=0;a<f;++a)b.push(c[a].appendChild(document.createTextNode(d)))}else for(a=0;a<f;++a)b.push(c[a].appendChild(document.createElement(d)))}function M(){for(var c=this.nodes,f=c.length,d=this.expression,b=null,a,e=0;e<f;++e){b=d.evaluate(c[e],XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,
b);for(var g=0,h=b.snapshotLength;g<h;g++){a=b.snapshotItem(g);a.parentNode.removeChild(a)}}}function N(){var c=this.nodes,f=c.length,d=this.value;if(typeof d=="function"&&d)for(var b=0;b<f;++b){var a=c[b],e=d.call(a);a.nodeValue=e}else for(b=0;b<f;++b)c[b].nodeValue=d}function O(){for(var c=this.nodes,f=this.results,d=c.length,b=this.expression,a=null,e,g=f.length=0;g<d;++g)for(a=b.evaluate(c[g],XPathResult.UNORDERED_NODE_ITERATOR_TYPE,a);(e=a.iterateNext())!=null;)f.push(e)}function w(c,f){var d=
{},b;if(arguments.length<2)f=z;b=typeof c=="string"?B(c,document,[]):c instanceof Array?c.slice():[c];d.select=function(a){return w.apply(null,F(b,f,a))};d.add=function(a){a=s.qualify(a);var e=[];if(a.space)for(var g=0;g<b.length;g++)e.push(b[g].appendChild(document.createElementNS(a.space,a.local)));else for(g=0;g<b.length;g++)e.push(b[g].appendChild(document.createElement(a)));return w(e,f)};d.remove=function(){for(var a=0;a<b.length;a++){var e=b[a];e.parentNode&&e.parentNode.removeChild(e)}return d};
d.attr=function(a,e){a=s.qualify(a);if(arguments.length<2)return b.length?a.space?b[0].getAttributeNS(a.space,a.local):b[0].getAttribute(a):null;if(a.space)if(e==null)for(var g=0;g<b.length;g++)b[g].removeAttributeNS(a.space,a.local);else if(typeof e=="function")for(g=0;g<b.length;g++){var h=b[g],r=e.call(d,f[g],g);r==null?h.removeAttributeNS(a.space,a.local):h.setAttributeNS(a.space,a.local,r)}else for(g=0;g<b.length;g++)b[g].setAttributeNS(a.space,a.local,e);else if(e==null)for(g=0;g<b.length;g++)b[g].removeAttribute(a);
else if(typeof e=="function")for(g=0;g<b.length;g++){h=b[g];r=e.call(d,f[g],g);r==null?h.removeAttribute(a):h.setAttribute(a,r)}else for(g=0;g<b.length;g++)b[g].setAttribute(a,e);return d};d.style=function(a,e,g){if(arguments.length<2)return b.length?b[0].style.getPropertyValue(a):null;if(arguments.length<3)g=null;if(e==null)for(var h=0;h<b.length;h++)b[h].style.removeProperty(a);else if(typeof e=="function")for(h=0;h<b.length;h++){var r=b[h],p=e.call(d,f[h],h);p==null?r.style.removeProperty(a):r.style.setProperty(a,
p,g)}else for(h=0;h<b.length;h++)b[h].style.setProperty(a,e,g);return d};d.text=function(a){if(!arguments.length)return b.length&&b[0].firstChild?b[0].firstChild.nodeValue:null;if(a==null)for(var e=0;e<b.length;e++){var g=b[e];g.firstChild&&g.removeChild(g.firstChild)}else if(typeof a=="function")for(e=0;e<b.length;e++){g=b[e];var h=a.call(d,f[e],e);if(h==null)g.firstChild&&g.removeChlid(g.firstChild);else if(g.firstChild)g.firstChild.nodeValue=h;else g.appendChild(document.createTextNode(h))}else for(e=
0;e<b.length;e++){g=b[e];if(g.firstChild)g.firstChild.nodeValue=a;else g.appendChild(document.createTextNode(a))}return d};d.length=function(){return b.length};d.item=function(a){return b[a]};d.transition=function(){return P().select(b,f)};return d}function B(c,f,d){for(f=document.evaluate(c,f,s.resolve,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null);(c=f.iterateNext())!=null;)d.push(c);return d}function F(c,f,d){var b=[],a=z;if(typeof d=="string")if(f===z)for(var e=0;e<c.length;e++)B(d,c[e]||document,
b);else{a=[];for(var g=e=0;e<c.length;e++){B(d,c[e]||document,b);for(var h=f[e];g<b.length;g++)a.push(h)}}else if(typeof d=="number"){b.push(c[d]);a=f===z?z:f[d]}else b=d;return[b,a]}function P(){function c(){A=0;x=Date.now();f();h.dispatch({type:"start"});C=setInterval(f,r)}function f(){for(var i=(Date.now()-x)/u,j=y(i<0?0:i>1?1:i);j>=n[n.length-1].t;)n.pop().f();for(var k=0;k<D.length;k++)D[k](j);if(i>=1){clearInterval(C);C=0;h.dispatch({type:"end"})}}function d(i,j){i=String(i).split(G);var k=
String(j).split(G);if(i.length===k.length){var m=i.map(parseFloat),l=k.map(parseFloat);if(!(m.every(isNaN)||l.every(isNaN)))return function(q){for(var o=0;o<m.length;o++)if(!isNaN(m[o])&&!isNaN(l[o]))k[o]=m[o]*(1-q)+l[o]*q;return k.join("")}}}function b(i,j,k){j=s.qualify(j);var m=d(j.space?i.getAttributeNS(j.space,j.local):i.getAttribute(j),k);m?D.push(j.space?function(l){i.setAttributeNS(j.space,j.local,m(l))}:function(l){i.setAttribute(j,m(l))}):n.push({t:0.5,f:j.space?function(){i.setAttributeNS(j.space,
j.local,k)}:function(){i.setAttribute(j,k)}})}function a(i,j,k,m){n.push({t:0.5,f:function(){w(i).style(j,k,m)}})}function e(i,j){n.push({t:0.5,f:function(){w(i).text(j)}})}var g={},h={},r=24,p=r,u=250,y=v.ease("cubic-in-out"),x,n=[{t:NaN}],D=[],A,C;A=setTimeout(c,p);v.dispatch(h);h.duration=function(i){if(!arguments.length)return u;u=i;return this};h.delay=function(i){if(!arguments.length)return p;p=i;if(A){clearInterval(A);A=setTimeout(c,p)}return this};h.ease=function(i){if(!arguments.length)return y;
y=typeof i=="string"?v.ease(i):i;return this};g.select=function(i,j){var k=Object.create(h);k.select=function(m){return g.select.apply(null,F(i,j,m))};k.attr=function(m,l){if(typeof l=="function")for(var q=0;q<i.length;q++)b(i[q],m,l.call(k,j[q],q));else for(q=0;q<i.length;q++)b(i[q],m,l);return k};k.style=function(m,l,q){if(arguments.length<3)q=null;if(typeof l=="function")for(var o=0;o<i.length;o++)a(i[o],m,l.call(k,j[o],o),q);else for(o=0;o<i.length;o++)a(i[o],m,l,q);return k};k.text=function(m){if(typeof m==
"function")for(var l=0;l<i.length;l++)e(i[l],m.call(k,j[l],l));else for(l=0;l<i.length;l++)e(i[l],m);return k};return k};return g}function H(c){return function(f){return 1-c(1-f)}}function I(c){return function(f){return 0.5*(f<0.5?c(2*f):2-c(2-2*f))}}function Q(){return t}function E(c){return function(f){return Math.pow(f,c)}}function R(c){return 1-Math.cos(c*Math.PI/2)}function S(c){return c?Math.pow(2,10*(c-1))-0.0010:0}function T(c){return 1-Math.sqrt(1-c*c)}function U(c,f){var d;if(arguments.length<
2)f=0.45;if(arguments.length<1){c=1;d=f/4}else d=f/(2*Math.PI)*Math.asin(1/c);return function(b){return 1+c*Math.pow(2,10*-b)*Math.sin(-(b+d)*2*Math.PI/f)}}function V(c){c||(c=1.70158);return function(f){return f*f*((c+1)*f-c)}}function W(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+0.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+0.9375:7.5625*(c-=2.625/2.75)*c+0.984375}v.version="0.0.0";var s={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",
xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},resolve:function(c){return s.prefix[c]||null},qualify:function(c){var f=c.indexOf(":");return f<0?c:{space:s.prefix[c.substring(0,f)],local:c.substring(f+1)}}};v.dispatch=function(c){var f={};c.on=function(d,b){d=f[d]||(f[d]=[]);for(var a=0;a<d.length;a++)if(d[a].handler==b)return this;d.push({handler:b,on:true});return this};c.off=function(d,b){if(d=f[d])for(var a=0;a<d.length;a++){var e=d[a];if(e.handler==b){e.on=
false;d.splice(a,1);break}}return this};c.dispatch=function(d){var b=f[d.type];if(b){b=b.slice();for(var a=0;a<b.length;a++){var e=b[a];e.on&&e.handler.call(c,d)}}};return c};v.transform=function(){function c(b){var a=Object.create(f);a.attr=function(e,g){d.push({impl:J,nodes:b,name:e,value:g});return a};a.style=function(e,g,h){d.push({impl:K,nodes:b,name:e,value:g,priority:arguments.length<3?null:h});return a};a.add=function(e,g){e={impl:L,nodes:b,results:[],name:e,value:g};d.push(e);return c(e.results)};
a.remove=function(e){d.push({impl:M,nodes:b,expression:document.createExpression(e,s.resolve)});return a};a.value=function(e){d.push({impl:N,nodes:b,value:e});return a};a.text=function(e){a.remove("text()").add("#text",e);return a};a.select=function(e){e={impl:O,nodes:b,results:[],expression:document.createExpression(e,s.resolve)};d.push(e);return c(e.results)};return a}var f={},d=[];f.apply=function(){for(var b=0,a=d.length;b<a;++b)d[b].impl();return f};return c([document])};v.select=function(c){return w(c)};
var z={},G=/([-0-9.]+)/;v.map=function(c){var f={},d,b;v.dispatch(f);f.from=function(a){if(!arguments.length)return d;d=a;return f};f.by=function(a){if(!arguments.length)return b;b=a;return f};f.apply=function(a){if(!arguments.length)a=f.dispatch;for(var e=[],g=[],h=[],r=[],p=0;p<c.length;p++){var u=c[p],y=w(b.call(f,u,p)),x=y.length();if(x)for(var n=0;n<x;n++){h.push(y.item(n));r.push(u)}else{e.push(null);g.push(u)}}u=[];y=w(d);p=0;a:for(;p<y.length();p++){x=y.item(p);for(n=0;n<e.length;n++)if(e[n]===
x)continue a;for(n=0;n<h.length;n++)if(h[n]===x)continue a;u.push(x)}e.length&&f.dispatch({type:"enter",target:w(e,g)});h.length&&f.dispatch({type:"update",target:w(h,r)});u.length&&f.dispatch({type:"exit",target:w(u)});return f};return f};var X=E(2),Y=E(3),Z={linear:function(){return Q},poly:E,quad:function(){return X},cubic:function(){return Y},sin:function(){return R},exp:function(){return S},circle:function(){return T},elastic:U,back:V,bounce:function(){return W}},$={"in":function(c){return c},
out:H,"in-out":I,"out-int":function(c){return I(H(c))}};v.ease=function(c){var f=c.indexOf("-"),d=f>=0?c.substring(0,f):c;f=f>=0?c.substring(f+1):"in";return $[f](Z[d].apply(null,Array.prototype.slice.call(arguments,1)))}})(org.epheme);
