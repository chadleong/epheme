if(!Object.create)Object.create=function(k){function o(){}o.prototype=k;return new o};
(function(k){function o(){function c(d){var a=Object.create(g);a.data=function(b){var h,e={impl:u,value:b,actions:[],enterActions:[],exitActions:[]};d.push(e);h=c(e.actions);h.enter=c(e.enterActions);h.exit=c(e.exitActions);h.key=function(j,m){e.key={name:p.qualify(j),value:m};return h};return h};a.attr=function(b,h){d.push({impl:v,name:p.qualify(b),value:h});return a};a.style=function(b,h,e){d.push({impl:w,name:b,value:h,priority:arguments.length<3?null:e});return a};a.add=function(b,h){b={impl:x,
name:p.qualify(b),value:h,actions:[]};d.push(b);return c(b.actions)};a.remove=function(b){d.push({impl:y,selector:b});return a};a.text=function(b){d.push({impl:z,value:b});return a};a.filter=function(b){b={impl:A,filter:b,actions:[]};d.push(b);return c(b.actions)};a.select=function(b){b={impl:B,selector:b,actions:[]};d.push(b);return c(b.actions)};a.selectAll=function(b){b={impl:C,selector:b,actions:[]};d.push(b);return c(b.actions)};return a}var g={},f=[];g.apply=function(){i.unshift(null);l(f,[{node:document,
index:0}]);i.shift();return g};return c(f)}function l(c,g){var f=c.length,d;for(d=0;d<f;++d)c[d].impl(g)}function x(c){var g=c.length,f=this.name,d=[],a,b,h;if(f.local)for(a=0;a<g;++a){d.push(h=Object.create(b=c[a]));h.node=(h.parentNode=b.node).appendChild(document.createElementNS(f.space,f.local))}else for(a=0;a<g;++a){d.push(h=Object.create(b=c[a]));h.node=(h.parentNode=b.node).appendChild(document.createElement(f))}l(this.actions,d)}function v(c){var g=c.length,f=this.name,d=this.value,a,b,h;
if(f.local)if(d==null)for(a=0;a<g;++a)c[a].node.removeAttributeNS(f.space,f.local);else if(typeof d=="function")for(a=0;a<g;++a){i[0]=(b=c[a]).data;h=d.apply(b,i);h==null?b.node.removeAttributeNS(f.space,f.local):b.node.setAttributeNS(f.space,f.local,h)}else for(a=0;a<g;++a)c[a].node.setAttributeNS(f.space,f.local,d);else if(d==null)for(a=0;a<g;++a)c[a].node.removeAttribute(f);else if(typeof d=="function")for(a=0;a<g;++a){i[0]=(b=c[a]).data;h=d.apply(null,i);h==null?b.node.removeAttribute(f):b.node.setAttribute(f,
h)}else for(a=0;a<g;++a)c[a].node.setAttribute(f,d)}function u(c){var g=this.value,f=c.length,d,a=this.key,b,h,e,j,m=[],r=[],s=[],n,q,t;if(typeof g=="function"){b=i.shift();g=g.apply(null,i);i.unshift(b)}d=g.length;if(a){b=a.name;h=a.value;n={};q={};t={};if(b.local)for(a=0;a<f;++a){if(j=c[a].node){e=j.getAttributeNS(b.space,b.local);if(e!=null)n[e]=j}}else for(a=0;a<f;++a)if(j=c[a].node){e=j.getAttribute(b);if(e!=null)n[e]=j}for(a=0;a<d;++a){i[0]=b=g[a];e=h.apply(null,i);if(e!=null){q[e]=b;t[e]=a}}for(e in q){b=
q[e];a=t[e];(j=n[e])?r.push({node:j,data:b,key:e,index:a}):m.push({node:c.parentNode,data:b,key:e,index:a})}for(e in n)e in q||s.push({node:n[e]})}else{e=d<f?d:f;for(a=0;a<e;++a){(j=c[a]).data=g[a];if(j.node)r.push(j);else{j.node=j.parentNode;m.push(j)}}for(e=a;e<d;++e)m.push({node:c.parentNode,data:g[e],index:e});for(e=a;e<f;++e)s.push(c[e])}l(this.enterActions,m);l(this.actions,r);l(this.exitActions,s)}function y(c){var g=c.length,f=this.selector,d,a,b,h,e;if(f==null)for(a=0;a<g;++a){e=c[a].node;
e.parentNode.removeChild(e)}else for(a=0;a<g;++a){d=c[a].node.querySelectorAll(f);b=0;for(h=d.length;b<h;b++){e=d[b];e.parentNode.removeChild(e)}}}function A(c){var g=[],f=c.length,d=this.filter,a,b;for(a=0;a<f;++a){i[0]=(b=c[a]).data;d.apply(b,i)&&g.push(b)}l(this.actions,g)}function B(c){var g=[],f=c.length,d=this.selector,a,b,h,e;for(a=0;a<f;++a){e=(h=(b=c[a]).node).querySelector(d);if(e!=null){g.push(b=Object.create(b));b.parentNode=h;b.node=e}}l(this.actions,g)}function C(c){var g=c.length,f=
this.selector,d,a,b;i.unshift(null);for(d=0;d<g;++d){i[1]=(a=c[d]).data;l(this.actions,D((b=a.node).querySelectorAll(f),b))}i.shift()}function D(c,g){var f=[],d=0,a=c.length;for(f.parentNode=g;d<a;d++)f.push({node:c[d],index:d});return f}function w(c){var g=c.length,f=this.name,d=this.value,a=this.priority,b,h,e;if(d==null)for(b=0;b<g;++b)c[b].node.style.removeProperty(f);else if(typeof d=="function")for(b=0;b<g;++b){h=c[b];i[0]=h.data;e=d.apply(null,i);e==null?h.node.style.removeProperty(f):h.node.style.setProperty(f,
e,a)}else for(b=0;b<g;++b)c[b].node.style.setProperty(f,d,a)}function z(c){var g=c.length,f=this.value,d,a,b;if(typeof f=="function")for(d=0;d<g;++d){a=c[d];i[0]=a.data;b=f.apply(null,i);for(a=a.node;a.lastChild;)a.removeChild(a.lastChild);a.appendChild(document.createTextNode(b))}else for(d=0;d<g;++d){for(a=c[d].node;a.lastChild;)a.removeChild(a.lastChild);a.appendChild(document.createTextNode(f))}}k=(k.org||(k.org={})).epheme={};k.version="0.0.0";var p={prefix:{svg:"http://www.w3.org/2000/svg",
xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},resolve:function(c){return p.prefix[c]||null},qualify:function(c){var g=c.indexOf(":");return g<0?c:{space:p.prefix[c.substring(0,g)],local:c.substring(g+1)}}},i=[];k.select=function(c){return o().select(c)};k.selectAll=function(c){return o().selectAll(c)}})(this);
