if(!org)var org={};if(!org.epheme)org.epheme={};
(function(r){function p(a,d){var h={},c;if(arguments.length<2)d=w;c=typeof a=="string"?z(a,document,[]):a instanceof Array?a.slice():[a];h.select=function(b){var g=[],e=w;if(typeof b=="string")if(d===w)for(var f=0;f<c.length;f++)z(b,c[f]||document,g);else{e=[];for(var n=f=0;f<c.length;f++){z(b,c[f]||document,g);for(var l=d[f];n<g.length;n++)e.push(l)}}else if(typeof b=="number"){g.push(c[b]);e=d===w?w:d[b]}else g=b;return p(g,e)};h.add=function(b){b=v.qualify(b);var g=[];if(b.space)for(var e=0;e<
c.length;e++)g.push(c[e].appendChild(document.createElementNS(b.space,b.local)));else for(e=0;e<c.length;e++)g.push(c[e].appendChild(document.createElement(b)));return p(g,d)};h.remove=function(){for(var b=0;b<c.length;b++){var g=c[b];g.parentNode&&g.parentNode.removeChild(g)}return h};h.attr=function(b,g){b=v.qualify(b);if(arguments.length<2)return c.length?b.space?c[0].getAttributeNS(b.space,b.local):c[0].getAttribute(b):null;if(b.space)if(g==null)for(var e=0;e<c.length;e++)c[e].removeAttributeNS(b.space,
b.local);else if(typeof g=="function")for(e=0;e<c.length;e++){var f=c[e],n=g.call(h,d[e],e);n==null?f.removeAttributeNS(b.space,b.local):f.setAttributeNS(b.space,b.local,n)}else for(e=0;e<c.length;e++)c[e].setAttributeNS(b.space,b.local,g);else if(g==null)for(e=0;e<c.length;e++)c[e].removeAttribute(b);else if(typeof g=="function")for(e=0;e<c.length;e++){f=c[e];n=g.call(h,d[e],e);n==null?f.removeAttribute(b):f.setAttribute(b,n)}else for(e=0;e<c.length;e++)c[e].setAttribute(b,g);return h};h.style=function(b,
g,e){if(arguments.length<2)return c.length?c[0].style.getPropertyValue(b):null;if(arguments.length<3)e=null;if(g==null)for(var f=0;f<c.length;f++)c[f].style.removeProperty(b);else if(typeof g=="function")for(f=0;f<c.length;f++){var n=c[f],l=g.call(h,d[f],f);l==null?n.style.removeProperty(b):n.style.setProperty(b,l,e)}else for(f=0;f<c.length;f++)c[f].style.setProperty(b,g,e);return h};h.text=function(b){if(!arguments.length)return c.length&&c[0].firstChild?c[0].firstChild.nodeValue:null;if(b==null)for(var g=
0;g<c.length;g++){var e=c[g];e.firstChild&&e.removeChild(e.firstChild)}else if(typeof b=="function")for(g=0;g<c.length;g++){e=c[g];var f=b.call(h,d[g],g);if(f==null)e.firstChild&&e.removeChlid(e.firstChild);else if(e.firstChild)e.firstChild.nodeValue=f;else e.appendChild(document.createTextNode(f))}else for(g=0;g<c.length;g++){e=c[g];if(e.firstChild)e.firstChild.nodeValue=b;else e.appendChild(document.createTextNode(b))}return h};h.length=function(){return c.length};h.item=function(b){return c[b]};
h.transition=function(){return G(c,d)};return h}function z(a,d,h){for(d=document.evaluate(a,d,v.resolve,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null);(a=d.iterateNext())!=null;)h.push(a);return h}function G(a,d){function h(){x=0;s=Date.now();c();f.dispatch({type:"start"});A=setInterval(c,n)}function c(){for(var j=Math.max(0,Math.min(1,(Date.now()-s)/q)),i=u(j);i>=m[m.length-1].t;)m.pop().f();for(var k=0;k<B.length;k++)B[k](i);if(j==1){clearInterval(A);A=0;f.dispatch({type:"end"})}}function b(j,i,
k){var o=parseFloat(j.getAttribute(i)),C=parseFloat(k);if(isNaN(o)||isNaN(C))m.push({t:0.5,f:function(){p(j).attr(i,k)}});else{i=v.qualify(i);B.push(i.space?function(y){j.setAttributeNS(i.space,i.local,o*(1-y)+C*y+"%")}:function(y){j.setAttribute(i,o*(1-y)+C*y+"%")})}}function g(j,i,k,o){m.push({t:0.5,f:function(){p(j).style(i,k,o)}})}function e(j,i){m.push({t:0.5,f:function(){p(j).text(i)}})}var f={},n=24,l=n,q=250,u=r.ease("cubic-in-out"),s,m=[{t:NaN}],B=[],x,A;x=setTimeout(h,l);r.dispatch(f);f.duration=
function(j){if(!arguments.length)return q;q=j;return f};f.delay=function(j){if(!arguments.length)return l;l=j;if(x){clearInterval(x);x=setTimeout(h,l)}return f};f.ease=function(j){if(!arguments.length)return u;u=typeof j=="string"?r.ease(j):j;return f};f.attr=function(j,i){if(typeof i=="function")for(var k=0;k<a.length;k++)b(a[k],j,i.call(f,d[k],k));else for(k=0;k<a.length;k++)b(a[k],j,i);return f};f.style=function(j,i,k){if(arguments.length<3)k=null;if(typeof i=="function")for(var o=0;o<a.length;o++)g(a[o],
j,i.call(f,d[o],o),k);else for(o=0;o<a.length;o++)g(a[o],j,i,k);return f};f.text=function(j){if(typeof j=="function")for(var i=0;i<a.length;i++)e(a[i],j.call(f,d[i],i));else for(i=0;i<a.length;i++)e(a[i],j);return f};return f}function E(a){return function(d){return 1-a(1-d)}}function F(a){return function(d){return 0.5*(d<0.5?a(2*d):2-a(2-2*d))}}function H(){return t}function D(a){return function(d){return Math.pow(d,a)}}function I(a){return 1-Math.cos(a*Math.PI/2)}function J(a){return a?Math.pow(2,
10*(a-1))-0.0010:0}function K(a){return 1-Math.sqrt(1-a*a)}function L(a,d){var h;if(arguments.length<2)d=0.45;if(arguments.length<1){a=1;h=d/4}else h=d/(2*Math.PI)*Math.asin(1/a);return function(c){return 1+a*Math.pow(2,10*-c)*Math.sin(-(c+h)*2*Math.PI/d)}}function M(a){a||(a=1.70158);return function(d){return d*d*((a+1)*d-a)}}function N(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}r.version="0.0.0";
var v={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},resolve:function(a){return v.prefix[a]||null},qualify:function(a){var d=a.indexOf(":");return d<0?a:{space:v.prefix[a.substring(0,d)],local:a.substring(d+1)}}};r.dispatch=function(a){var d={};a.on=function(h,c){h=d[h]||(d[h]=[]);for(var b=0;b<h.length;b++)if(h[b].handler==c)return a;h.push({handler:c,
on:true});return a};a.off=function(h,c){if(h=d[h])for(var b=0;b<h.length;b++){var g=h[b];if(g.handler==c){g.on=false;h.splice(b,1);break}}return a};a.dispatch=function(h){var c=d[h.type];if(c){c=c.slice();for(var b=0;b<c.length;b++){var g=c[b];g.on&&g.handler.call(a,h)}}}};r.select=function(a){return p(a)};var w={};r.map=function(a){var d={},h,c;r.dispatch(d);d.from=function(b){if(!arguments.length)return h;h=b;return d};d.by=function(b){if(!arguments.length)return c;c=b;return d};d.apply=function(b){if(!arguments.length)b=
d.dispatch;for(var g=[],e=[],f=[],n=[],l=0;l<a.length;l++){var q=a[l],u=p(c.call(d,q,l)),s=u.length();if(s)for(var m=0;m<s;m++){f.push(u.item(m));n.push(q)}else{g.push(null);e.push(q)}}q=[];u=p(h);l=0;a:for(;l<u.length();l++){s=u.item(l);for(m=0;m<g.length;m++)if(g[m]===s)continue a;for(m=0;m<f.length;m++)if(f[m]===s)continue a;q.push(s)}g.length&&d.dispatch({type:"enter",target:p(g,e)});f.length&&d.dispatch({type:"update",target:p(f,n)});q.length&&d.dispatch({type:"exit",target:p(q)});return d};
return d};var O=D(2),P=D(3),Q={linear:function(){return H},poly:D,quad:function(){return O},cubic:function(){return P},sin:function(){return I},exp:function(){return J},circle:function(){return K},elastic:L,back:M,bounce:function(){return N}},R={"in":function(a){return a},out:E,"in-out":F,"out-int":function(a){return F(E(a))}};r.ease=function(a){var d=a.indexOf("-"),h=d>=0?a.substring(0,d):a;d=d>=0?a.substring(d+1):"in";return R[d](Q[h].apply(null,Array.prototype.slice.call(arguments,1)))}})(org.epheme);
