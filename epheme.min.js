if(!org)var org={};if(!org.epheme)org.epheme={};
(function(v){function u(a,d){var g={},c;if(arguments.length<2)d=z;c=typeof a=="string"?B(a,document,[]):a instanceof Array?a.slice():[a];g.select=function(b){return u.apply(null,F(c,d,b))};g.add=function(b){b=y.qualify(b);var f=[];if(b.space)for(var e=0;e<c.length;e++)f.push(c[e].appendChild(document.createElementNS(b.space,b.local)));else for(e=0;e<c.length;e++)f.push(c[e].appendChild(document.createElement(b)));return u(f,d)};g.remove=function(){for(var b=0;b<c.length;b++){var f=c[b];f.parentNode&&
f.parentNode.removeChild(f)}return g};g.attr=function(b,f){b=y.qualify(b);if(arguments.length<2)return c.length?b.space?c[0].getAttributeNS(b.space,b.local):c[0].getAttribute(b):null;if(b.space)if(f==null)for(var e=0;e<c.length;e++)c[e].removeAttributeNS(b.space,b.local);else if(typeof f=="function")for(e=0;e<c.length;e++){var i=c[e],r=f.call(g,d[e],e);r==null?i.removeAttributeNS(b.space,b.local):i.setAttributeNS(b.space,b.local,r)}else for(e=0;e<c.length;e++)c[e].setAttributeNS(b.space,b.local,f);
else if(f==null)for(e=0;e<c.length;e++)c[e].removeAttribute(b);else if(typeof f=="function")for(e=0;e<c.length;e++){i=c[e];r=f.call(g,d[e],e);r==null?i.removeAttribute(b):i.setAttribute(b,r)}else for(e=0;e<c.length;e++)c[e].setAttribute(b,f);return g};g.style=function(b,f,e){if(arguments.length<2)return c.length?c[0].style.getPropertyValue(b):null;if(arguments.length<3)e=null;if(f==null)for(var i=0;i<c.length;i++)c[i].style.removeProperty(b);else if(typeof f=="function")for(i=0;i<c.length;i++){var r=
c[i],p=f.call(g,d[i],i);p==null?r.style.removeProperty(b):r.style.setProperty(b,p,e)}else for(i=0;i<c.length;i++)c[i].style.setProperty(b,f,e);return g};g.text=function(b){if(!arguments.length)return c.length&&c[0].firstChild?c[0].firstChild.nodeValue:null;if(b==null)for(var f=0;f<c.length;f++){var e=c[f];e.firstChild&&e.removeChild(e.firstChild)}else if(typeof b=="function")for(f=0;f<c.length;f++){e=c[f];var i=b.call(g,d[f],f);if(i==null)e.firstChild&&e.removeChlid(e.firstChild);else if(e.firstChild)e.firstChild.nodeValue=
i;else e.appendChild(document.createTextNode(i))}else for(f=0;f<c.length;f++){e=c[f];if(e.firstChild)e.firstChild.nodeValue=b;else e.appendChild(document.createTextNode(b))}return g};g.length=function(){return c.length};g.item=function(b){return c[b]};g.transition=function(){return J().select(c,d)};return g}function B(a,d,g){for(d=document.evaluate(a,d,y.resolve,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null);(a=d.iterateNext())!=null;)g.push(a);return g}function F(a,d,g){var c=[],b=z;if(typeof g==
"string")if(d===z)for(var f=0;f<a.length;f++)B(g,a[f]||document,c);else{b=[];for(var e=f=0;f<a.length;f++){B(g,a[f]||document,c);for(var i=d[f];e<c.length;e++)b.push(i)}}else if(typeof g=="number"){c.push(a[g]);b=d===z?z:d[g]}else c=g;return[c,b]}function J(){function a(){A=0;w=Date.now();d();i.dispatch({type:"start"});C=setInterval(d,r)}function d(){for(var h=(Date.now()-w)/s,j=x(h<0?0:h>1?1:h);j>=n[n.length-1].t;)n.pop().f();for(var k=0;k<D.length;k++)D[k](j);if(h>=1){clearInterval(C);C=0;i.dispatch({type:"end"})}}
function g(h,j){h=String(h).split(G);var k=String(j).split(G);if(h.length===k.length){var m=h.map(parseFloat),l=k.map(parseFloat);if(!(m.every(isNaN)||l.every(isNaN)))return function(q){for(var o=0;o<m.length;o++)if(!isNaN(m[o])&&!isNaN(l[o]))k[o]=m[o]*(1-q)+l[o]*q;return k.join("")}}}function c(h,j,k){j=y.qualify(j);var m=g(j.space?h.getAttributeNS(j.space,j.local):h.getAttribute(j),k);m?D.push(j.space?function(l){h.setAttributeNS(j.space,j.local,m(l))}:function(l){h.setAttribute(j,m(l))}):n.push({t:0.5,
f:j.space?function(){h.setAttributeNS(j.space,j.local,k)}:function(){h.setAttribute(j,k)}})}function b(h,j,k,m){n.push({t:0.5,f:function(){u(h).style(j,k,m)}})}function f(h,j){n.push({t:0.5,f:function(){u(h).text(j)}})}var e={},i={},r=24,p=r,s=250,x=v.ease("cubic-in-out"),w,n=[{t:NaN}],D=[],A,C;A=setTimeout(a,p);v.dispatch(i);i.duration=function(h){if(!arguments.length)return s;s=h;return this};i.delay=function(h){if(!arguments.length)return p;p=h;if(A){clearInterval(A);A=setTimeout(a,p)}return this};
i.ease=function(h){if(!arguments.length)return x;x=typeof h=="string"?v.ease(h):h;return this};e.select=function(h,j){var k=Object.create(i);k.select=function(m){return e.select.apply(null,F(h,j,m))};k.attr=function(m,l){if(typeof l=="function")for(var q=0;q<h.length;q++)c(h[q],m,l.call(k,j[q],q));else for(q=0;q<h.length;q++)c(h[q],m,l);return k};k.style=function(m,l,q){if(arguments.length<3)q=null;if(typeof l=="function")for(var o=0;o<h.length;o++)b(h[o],m,l.call(k,j[o],o),q);else for(o=0;o<h.length;o++)b(h[o],
m,l,q);return k};k.text=function(m){if(typeof m=="function")for(var l=0;l<h.length;l++)f(h[l],m.call(k,j[l],l));else for(l=0;l<h.length;l++)f(h[l],m);return k};return k};return e}function H(a){return function(d){return 1-a(1-d)}}function I(a){return function(d){return 0.5*(d<0.5?a(2*d):2-a(2-2*d))}}function K(){return t}function E(a){return function(d){return Math.pow(d,a)}}function L(a){return 1-Math.cos(a*Math.PI/2)}function M(a){return a?Math.pow(2,10*(a-1))-0.0010:0}function N(a){return 1-Math.sqrt(1-
a*a)}function O(a,d){var g;if(arguments.length<2)d=0.45;if(arguments.length<1){a=1;g=d/4}else g=d/(2*Math.PI)*Math.asin(1/a);return function(c){return 1+a*Math.pow(2,10*-c)*Math.sin(-(c+g)*2*Math.PI/d)}}function P(a){a||(a=1.70158);return function(d){return d*d*((a+1)*d-a)}}function Q(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}v.version="0.0.0";var y={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",
xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},resolve:function(a){return y.prefix[a]||null},qualify:function(a){var d=a.indexOf(":");return d<0?a:{space:y.prefix[a.substring(0,d)],local:a.substring(d+1)}}};v.dispatch=function(a){var d={};a.on=function(g,c){g=d[g]||(d[g]=[]);for(var b=0;b<g.length;b++)if(g[b].handler==c)return this;g.push({handler:c,on:true});return this};a.off=function(g,c){if(g=d[g])for(var b=0;b<g.length;b++){var f=
g[b];if(f.handler==c){f.on=false;g.splice(b,1);break}}return this};a.dispatch=function(g){var c=d[g.type];if(c){c=c.slice();for(var b=0;b<c.length;b++){var f=c[b];f.on&&f.handler.call(a,g)}}}};v.select=function(a){return u(a)};var z={},G=/([0-9.]+)/;v.map=function(a){var d={},g,c;v.dispatch(d);d.from=function(b){if(!arguments.length)return g;g=b;return d};d.by=function(b){if(!arguments.length)return c;c=b;return d};d.apply=function(b){if(!arguments.length)b=d.dispatch;for(var f=[],e=[],i=[],r=[],
p=0;p<a.length;p++){var s=a[p],x=u(c.call(d,s,p)),w=x.length();if(w)for(var n=0;n<w;n++){i.push(x.item(n));r.push(s)}else{f.push(null);e.push(s)}}s=[];x=u(g);p=0;a:for(;p<x.length();p++){w=x.item(p);for(n=0;n<f.length;n++)if(f[n]===w)continue a;for(n=0;n<i.length;n++)if(i[n]===w)continue a;s.push(w)}f.length&&d.dispatch({type:"enter",target:u(f,e)});i.length&&d.dispatch({type:"update",target:u(i,r)});s.length&&d.dispatch({type:"exit",target:u(s)});return d};return d};var R=E(2),S=E(3),T={linear:function(){return K},
poly:E,quad:function(){return R},cubic:function(){return S},sin:function(){return L},exp:function(){return M},circle:function(){return N},elastic:O,back:P,bounce:function(){return Q}},U={"in":function(a){return a},out:H,"in-out":I,"out-int":function(a){return I(H(a))}};v.ease=function(a){var d=a.indexOf("-"),g=d>=0?a.substring(0,d):a;d=d>=0?a.substring(d+1):"in";return U[d](T[g].apply(null,Array.prototype.slice.call(arguments,1)))}})(org.epheme);
