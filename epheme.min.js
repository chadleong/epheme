if(!org)var org={};if(!org.epheme)org.epheme={};
(function(s){function J(c){var d=c.length,e=u.qualify(this.name),b=this.value,a=typeof b=="function"&&b;if(e.space)if(b==null)for(a=0;a<d;++a)c[a].removeAttributeNS(e.space,e.local);else if(a)for(a=0;a<d;++a){var f=c[a],g=b.call(f);g==null?f.removeAttributeNS(e.space,e.local):f.setAttributeNS(e.space,e.local,g)}else for(a=0;a<d;++a)c[a].setAttributeNS(e.space,e.local,b);else if(b==null)for(a=0;a<d;++a)c[a].removeAttribute(e);else if(a)for(a=0;a<d;++a){f=c[a];g=b.call(f);g==null?f.removeAttribute(e):
f.setAttribute(e,g)}else for(a=0;a<d;++a)c[a].setAttribute(e,b)}function K(c){var d=c.length,e=u.qualify(this.name),b=this.value,a=typeof b=="function"&&b,f=this.priority;if(b==null)for(a=0;a<d;++a)c[a].style.removeProperty(e);else if(a)for(a=0;a<d;++a){var g=c[a],h=b.call(g);h==null?g.style.removeProperty(e):g.style.setProperty(e,h,f)}else for(a=0;a<d;++a)c[a].style.setProperty(e,b,f)}function L(c){var d=c.length,e=u.qualify(this.name),b=[];if(e.space)for(var a=0;a<d;++a)b.push(c[a].appendChild(document.createElementNS(e.space,
e.local)));else if(e=="#text"){e=this.value;if(typeof e=="function"&&e)for(a=0;a<d;++a){var f=c[a],g=e.call(f);b.push(f.appendChild(document.createTextNode(g)))}else for(a=0;a<d;++a)b.push(c[a].appendChild(document.createTextNode(e)))}else for(a=0;a<d;++a)b.push(c[a].appendChild(document.createElement(e)));return b}function M(c){for(var d=c.length,e=this.expression,b=null,a,f=0;f<d;++f){b=e.evaluate(c[f],XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,b);for(var g=0,h=b.snapshotLength;g<h;g++){a=b.snapshotItem(g);
a.parentNode.removeChild(a)}}}function N(c){var d=c.length,e=this.value;if(typeof e=="function"&&e)for(var b=0;b<d;++b){var a=c[b],f=e.call(a);a.nodeValue=f}else for(b=0;b<d;++b)c[b].nodeValue=e}function w(c,d){var e={},b;if(arguments.length<2)d=z;b=typeof c=="string"?B(c,document,[]):c instanceof Array?c.slice():[c];e.select=function(a){return w.apply(null,F(b,d,a))};e.add=function(a){a=u.qualify(a);var f=[];if(a.space)for(var g=0;g<b.length;g++)f.push(b[g].appendChild(document.createElementNS(a.space,
a.local)));else for(g=0;g<b.length;g++)f.push(b[g].appendChild(document.createElement(a)));return w(f,d)};e.remove=function(){for(var a=0;a<b.length;a++){var f=b[a];f.parentNode&&f.parentNode.removeChild(f)}return e};e.attr=function(a,f){a=u.qualify(a);if(arguments.length<2)return b.length?a.space?b[0].getAttributeNS(a.space,a.local):b[0].getAttribute(a):null;if(a.space)if(f==null)for(var g=0;g<b.length;g++)b[g].removeAttributeNS(a.space,a.local);else if(typeof f=="function")for(g=0;g<b.length;g++){var h=
b[g],r=f.call(e,d[g],g);r==null?h.removeAttributeNS(a.space,a.local):h.setAttributeNS(a.space,a.local,r)}else for(g=0;g<b.length;g++)b[g].setAttributeNS(a.space,a.local,f);else if(f==null)for(g=0;g<b.length;g++)b[g].removeAttribute(a);else if(typeof f=="function")for(g=0;g<b.length;g++){h=b[g];r=f.call(e,d[g],g);r==null?h.removeAttribute(a):h.setAttribute(a,r)}else for(g=0;g<b.length;g++)b[g].setAttribute(a,f);return e};e.style=function(a,f,g){if(arguments.length<2)return b.length?b[0].style.getPropertyValue(a):
null;if(arguments.length<3)g=null;if(f==null)for(var h=0;h<b.length;h++)b[h].style.removeProperty(a);else if(typeof f=="function")for(h=0;h<b.length;h++){var r=b[h],p=f.call(e,d[h],h);p==null?r.style.removeProperty(a):r.style.setProperty(a,p,g)}else for(h=0;h<b.length;h++)b[h].style.setProperty(a,f,g);return e};e.text=function(a){if(!arguments.length)return b.length&&b[0].firstChild?b[0].firstChild.nodeValue:null;if(a==null)for(var f=0;f<b.length;f++){var g=b[f];g.firstChild&&g.removeChild(g.firstChild)}else if(typeof a==
"function")for(f=0;f<b.length;f++){g=b[f];var h=a.call(e,d[f],f);if(h==null)g.firstChild&&g.removeChlid(g.firstChild);else if(g.firstChild)g.firstChild.nodeValue=h;else g.appendChild(document.createTextNode(h))}else for(f=0;f<b.length;f++){g=b[f];if(g.firstChild)g.firstChild.nodeValue=a;else g.appendChild(document.createTextNode(a))}return e};e.length=function(){return b.length};e.item=function(a){return b[a]};e.transition=function(){return O().select(b,d)};return e}function B(c,d,e){for(d=document.evaluate(c,
d,u.resolve,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null);(c=d.iterateNext())!=null;)e.push(c);return e}function F(c,d,e){var b=[],a=z;if(typeof e=="string")if(d===z)for(var f=0;f<c.length;f++)B(e,c[f]||document,b);else{a=[];for(var g=f=0;f<c.length;f++){B(e,c[f]||document,b);for(var h=d[f];g<b.length;g++)a.push(h)}}else if(typeof e=="number"){b.push(c[e]);a=d===z?z:d[e]}else b=e;return[b,a]}function O(){function c(){A=0;x=Date.now();d();h.dispatch({type:"start"});C=setInterval(d,r)}function d(){for(var i=
(Date.now()-x)/v,j=y(i<0?0:i>1?1:i);j>=n[n.length-1].t;)n.pop().f();for(var k=0;k<D.length;k++)D[k](j);if(i>=1){clearInterval(C);C=0;h.dispatch({type:"end"})}}function e(i,j){i=String(i).split(G);var k=String(j).split(G);if(i.length===k.length){var m=i.map(parseFloat),l=k.map(parseFloat);if(!(m.every(isNaN)||l.every(isNaN)))return function(q){for(var o=0;o<m.length;o++)if(!isNaN(m[o])&&!isNaN(l[o]))k[o]=m[o]*(1-q)+l[o]*q;return k.join("")}}}function b(i,j,k){j=u.qualify(j);var m=e(j.space?i.getAttributeNS(j.space,
j.local):i.getAttribute(j),k);m?D.push(j.space?function(l){i.setAttributeNS(j.space,j.local,m(l))}:function(l){i.setAttribute(j,m(l))}):n.push({t:0.5,f:j.space?function(){i.setAttributeNS(j.space,j.local,k)}:function(){i.setAttribute(j,k)}})}function a(i,j,k,m){n.push({t:0.5,f:function(){w(i).style(j,k,m)}})}function f(i,j){n.push({t:0.5,f:function(){w(i).text(j)}})}var g={},h={},r=24,p=r,v=250,y=s.ease("cubic-in-out"),x,n=[{t:NaN}],D=[],A,C;A=setTimeout(c,p);s.dispatch(h);h.duration=function(i){if(!arguments.length)return v;
v=i;return this};h.delay=function(i){if(!arguments.length)return p;p=i;if(A){clearInterval(A);A=setTimeout(c,p)}return this};h.ease=function(i){if(!arguments.length)return y;y=typeof i=="string"?s.ease(i):i;return this};g.select=function(i,j){var k=Object.create(h);k.select=function(m){return g.select.apply(null,F(i,j,m))};k.attr=function(m,l){if(typeof l=="function")for(var q=0;q<i.length;q++)b(i[q],m,l.call(k,j[q],q));else for(q=0;q<i.length;q++)b(i[q],m,l);return k};k.style=function(m,l,q){if(arguments.length<
3)q=null;if(typeof l=="function")for(var o=0;o<i.length;o++)a(i[o],m,l.call(k,j[o],o),q);else for(o=0;o<i.length;o++)a(i[o],m,l,q);return k};k.text=function(m){if(typeof m=="function")for(var l=0;l<i.length;l++)f(i[l],m.call(k,j[l],l));else for(l=0;l<i.length;l++)f(i[l],m);return k};return k};return g}function H(c){return function(d){return 1-c(1-d)}}function I(c){return function(d){return 0.5*(d<0.5?c(2*d):2-c(2-2*d))}}function P(){return t}function E(c){return function(d){return Math.pow(d,c)}}
function Q(c){return 1-Math.cos(c*Math.PI/2)}function R(c){return c?Math.pow(2,10*(c-1))-0.0010:0}function S(c){return 1-Math.sqrt(1-c*c)}function T(c,d){var e;if(arguments.length<2)d=0.45;if(arguments.length<1){c=1;e=d/4}else e=d/(2*Math.PI)*Math.asin(1/c);return function(b){return 1+c*Math.pow(2,10*-b)*Math.sin(-(b+e)*2*Math.PI/d)}}function U(c){c||(c=1.70158);return function(d){return d*d*((c+1)*d-c)}}function V(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+0.75:c<2.5/2.75?7.5625*
(c-=2.25/2.75)*c+0.9375:7.5625*(c-=2.625/2.75)*c+0.984375}s.version="0.0.0";var u={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},resolve:function(c){return u.prefix[c]||null},qualify:function(c){var d=c.indexOf(":");return d<0?c:{space:u.prefix[c.substring(0,d)],local:c.substring(d+1)}}};s.dispatch=function(c){var d={};c.on=function(e,b){e=d[e]||(d[e]=
[]);for(var a=0;a<e.length;a++)if(e[a].handler==b)return this;e.push({handler:b,on:true});return this};c.off=function(e,b){if(e=d[e])for(var a=0;a<e.length;a++){var f=e[a];if(f.handler==b){f.on=false;e.splice(a,1);break}}return this};c.dispatch=function(e){var b=d[e.type];if(b){b=b.slice();for(var a=0;a<b.length;a++){var f=b[a];f.on&&f.handler.call(c,e)}}};return c};s.transform=function(c){var d=s.dispatch({}),e=[];c=document.createExpression(c,u.resolve);d.attr=function(b,a){e.push({impl:J,name:b,
value:a});return d};d.style=function(b,a,f){e.push({impl:K,name:b,value:a,priority:arguments.length<3?null:f});return d};d.add=function(b,a){e.push({impl:L,name:b,value:a});return d};d.remove=function(b){e.push({impl:M,expression:document.createExpression(b,u.resolve)});return d};d.value=function(b){e.push({impl:N,value:b});return d};d.text=function(b){d.remove("text()").add("#text",b);return d};d.select=function(){return d};d.apply=function(){for(var b=[],a=c.evaluate(document,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,
null),f;(f=a.iterateNext())!=null;)b.push(f);a=0;for(f=e.length;a<f;++a)e[a].impl(b);return d};return d};s.select=function(c){return w(c)};var z={},G=/([-0-9.]+)/;s.map=function(c){var d={},e,b;s.dispatch(d);d.from=function(a){if(!arguments.length)return e;e=a;return d};d.by=function(a){if(!arguments.length)return b;b=a;return d};d.apply=function(a){if(!arguments.length)a=d.dispatch;for(var f=[],g=[],h=[],r=[],p=0;p<c.length;p++){var v=c[p],y=w(b.call(d,v,p)),x=y.length();if(x)for(var n=0;n<x;n++){h.push(y.item(n));
r.push(v)}else{f.push(null);g.push(v)}}v=[];y=w(e);p=0;a:for(;p<y.length();p++){x=y.item(p);for(n=0;n<f.length;n++)if(f[n]===x)continue a;for(n=0;n<h.length;n++)if(h[n]===x)continue a;v.push(x)}f.length&&d.dispatch({type:"enter",target:w(f,g)});h.length&&d.dispatch({type:"update",target:w(h,r)});v.length&&d.dispatch({type:"exit",target:w(v)});return d};return d};var W=E(2),X=E(3),Y={linear:function(){return P},poly:E,quad:function(){return W},cubic:function(){return X},sin:function(){return Q},exp:function(){return R},
circle:function(){return S},elastic:T,back:U,bounce:function(){return V}},Z={"in":function(c){return c},out:H,"in-out":I,"out-int":function(c){return I(H(c))}};s.ease=function(c){var d=c.indexOf("-"),e=d>=0?c.substring(0,d):c;d=d>=0?c.substring(d+1):"in";return Z[d](Y[e].apply(null,Array.prototype.slice.call(arguments,1)))}})(org.epheme);
