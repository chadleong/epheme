if(!org)var org={};if(!org.epheme)org.epheme={};
(function(w){function J(){var c=this.nodes,g=c.data||s,e=c.length,d=u.qualify(this.name),b=this.value,a=typeof b=="function"&&b;if(d.space)if(b==null)for(a=0;a<e;++a)c[a].removeAttributeNS(d.space,d.local);else if(a)for(a=0;a<e;++a){var f=c[a],h=b.call(f,g[a],a);h==null?f.removeAttributeNS(d.space,d.local):f.setAttributeNS(d.space,d.local,h)}else for(a=0;a<e;++a)c[a].setAttributeNS(d.space,d.local,b);else if(b==null)for(a=0;a<e;++a)c[a].removeAttribute(d);else if(a)for(a=0;a<e;++a){f=c[a];h=b.call(f,
g[a],a);h==null?f.removeAttribute(d):f.setAttribute(d,h)}else for(a=0;a<e;++a)c[a].setAttribute(d,b)}function K(){var c=this.nodes,g=c.data||s,e=c.length,d=u.qualify(this.name),b=this.value,a=typeof b=="function"&&b,f=this.priority;if(b==null)for(a=0;a<e;++a)c[a].style.removeProperty(d);else if(a)for(a=0;a<e;++a){var h=c[a],o=b.call(h,g[a],a);o==null?h.style.removeProperty(d):h.style.setProperty(d,o,f)}else for(a=0;a<e;++a)c[a].style.setProperty(d,b,f)}function L(){var c=this.nodes,g=c.length,e=u.qualify(this.name),
d=this.results;d.length=0;d.data=c.data;d.parents=c;if(e.space)for(var b=0;b<g;++b)d.push(c[b].appendChild(document.createElementNS(e.space,e.local)));else if(e=="#text"){e=this.value;if(typeof e=="function"&&e){var a=c.data||s;for(b=0;b<g;++b){var f=c[b],h=e.call(f,a[b],b);d.push(f.appendChild(document.createTextNode(h)))}}else for(b=0;b<g;++b)d.push(c[b].appendChild(document.createTextNode(e)))}else for(b=0;b<g;++b)d.push(c[b].appendChild(document.createElement(e)))}function M(){for(var c=this.nodes,
g=c.length,e=this.expression,d=null,b,a=0;a<g;++a){d=e.evaluate(c[a],XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,d);for(var f=0,h=d.snapshotLength;f<h;f++){b=d.snapshotItem(f);b.parentNode.removeChild(b)}}}function N(){var c=this.nodes,g=c.data||s,e=c.length,d=this.value;if(typeof d=="function"&&d)for(var b=0;b<e;++b){var a=c[b],f=d.call(a,g[b],b);a.nodeValue=f}else for(b=0;b<e;++b)c[b].nodeValue=d}function O(){var c=this.nodes,g=c.data,e=this.results,d=c.length,b=this.expression,a=null,f;e.length=0;
e.parents=c;if(g){e.data=[];for(var h=0;h<d;++h)for(a=b.evaluate(c[h],XPathResult.UNORDERED_NODE_ITERATOR_TYPE,a);(f=a.iterateNext())!=null;){e.push(f);e.data.push(g[h])}}else for(h=0;h<d;++h)for(a=b.evaluate(c[h],XPathResult.UNORDERED_NODE_ITERATOR_TYPE,a);(f=a.iterateNext())!=null;)e.push(f)}function P(){for(var c=this.nodes,g=c.parents.data||s,e=c.data=[],d=c.length,b=this.value,a=0;a<d;++a)e.push(b.call(c[a],g[a],a))}function x(c,g){var e={},d;if(arguments.length<2)g=s;d=typeof c=="string"?B(c,
document,[]):c instanceof Array?c.slice():[c];e.select=function(b){return x.apply(null,F(d,g,b))};e.add=function(b){b=u.qualify(b);var a=[];if(b.space)for(var f=0;f<d.length;f++)a.push(d[f].appendChild(document.createElementNS(b.space,b.local)));else for(f=0;f<d.length;f++)a.push(d[f].appendChild(document.createElement(b)));return x(a,g)};e.remove=function(){for(var b=0;b<d.length;b++){var a=d[b];a.parentNode&&a.parentNode.removeChild(a)}return e};e.attr=function(b,a){b=u.qualify(b);if(arguments.length<
2)return d.length?b.space?d[0].getAttributeNS(b.space,b.local):d[0].getAttribute(b):null;if(b.space)if(a==null)for(var f=0;f<d.length;f++)d[f].removeAttributeNS(b.space,b.local);else if(typeof a=="function")for(f=0;f<d.length;f++){var h=d[f],o=a.call(e,g[f],f);o==null?h.removeAttributeNS(b.space,b.local):h.setAttributeNS(b.space,b.local,o)}else for(f=0;f<d.length;f++)d[f].setAttributeNS(b.space,b.local,a);else if(a==null)for(f=0;f<d.length;f++)d[f].removeAttribute(b);else if(typeof a=="function")for(f=
0;f<d.length;f++){h=d[f];o=a.call(e,g[f],f);o==null?h.removeAttribute(b):h.setAttribute(b,o)}else for(f=0;f<d.length;f++)d[f].setAttribute(b,a);return e};e.style=function(b,a,f){if(arguments.length<2)return d.length?d[0].style.getPropertyValue(b):null;if(arguments.length<3)f=null;if(a==null)for(var h=0;h<d.length;h++)d[h].style.removeProperty(b);else if(typeof a=="function")for(h=0;h<d.length;h++){var o=d[h],q=a.call(e,g[h],h);q==null?o.style.removeProperty(b):o.style.setProperty(b,q,f)}else for(h=
0;h<d.length;h++)d[h].style.setProperty(b,a,f);return e};e.text=function(b){if(!arguments.length)return d.length&&d[0].firstChild?d[0].firstChild.nodeValue:null;if(b==null)for(var a=0;a<d.length;a++){var f=d[a];f.firstChild&&f.removeChild(f.firstChild)}else if(typeof b=="function")for(a=0;a<d.length;a++){f=d[a];var h=b.call(e,g[a],a);if(h==null)f.firstChild&&f.removeChlid(f.firstChild);else if(f.firstChild)f.firstChild.nodeValue=h;else f.appendChild(document.createTextNode(h))}else for(a=0;a<d.length;a++){f=
d[a];if(f.firstChild)f.firstChild.nodeValue=b;else f.appendChild(document.createTextNode(b))}return e};e.length=function(){return d.length};e.item=function(b){return d[b]};e.transition=function(){return Q().select(d,g)};return e}function B(c,g,e){for(g=document.evaluate(c,g,u.resolve,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null);(c=g.iterateNext())!=null;)e.push(c);return e}function F(c,g,e){var d=[],b=s;if(typeof e=="string")if(g===s)for(var a=0;a<c.length;a++)B(e,c[a]||document,d);else{b=[];for(var f=
a=0;a<c.length;a++){B(e,c[a]||document,d);for(var h=g[a];f<d.length;f++)b.push(h)}}else if(typeof e=="number"){d.push(c[e]);b=g===s?s:g[e]}else d=e;return[d,b]}function Q(){function c(){A=0;y=Date.now();g();h.dispatch({type:"start"});C=setInterval(g,o)}function g(){for(var i=(Date.now()-y)/v,j=z(i<0?0:i>1?1:i);j>=n[n.length-1].t;)n.pop().f();for(var k=0;k<D.length;k++)D[k](j);if(i>=1){clearInterval(C);C=0;h.dispatch({type:"end"})}}function e(i,j){i=String(i).split(G);var k=String(j).split(G);if(i.length===
k.length){var m=i.map(parseFloat),l=k.map(parseFloat);if(!(m.every(isNaN)||l.every(isNaN)))return function(r){for(var p=0;p<m.length;p++)if(!isNaN(m[p])&&!isNaN(l[p]))k[p]=m[p]*(1-r)+l[p]*r;return k.join("")}}}function d(i,j,k){j=u.qualify(j);var m=e(j.space?i.getAttributeNS(j.space,j.local):i.getAttribute(j),k);m?D.push(j.space?function(l){i.setAttributeNS(j.space,j.local,m(l))}:function(l){i.setAttribute(j,m(l))}):n.push({t:0.5,f:j.space?function(){i.setAttributeNS(j.space,j.local,k)}:function(){i.setAttribute(j,
k)}})}function b(i,j,k,m){n.push({t:0.5,f:function(){x(i).style(j,k,m)}})}function a(i,j){n.push({t:0.5,f:function(){x(i).text(j)}})}var f={},h={},o=24,q=o,v=250,z=w.ease("cubic-in-out"),y,n=[{t:NaN}],D=[],A,C;A=setTimeout(c,q);w.dispatch(h);h.duration=function(i){if(!arguments.length)return v;v=i;return this};h.delay=function(i){if(!arguments.length)return q;q=i;if(A){clearInterval(A);A=setTimeout(c,q)}return this};h.ease=function(i){if(!arguments.length)return z;z=typeof i=="string"?w.ease(i):i;
return this};f.select=function(i,j){var k=Object.create(h);k.select=function(m){return f.select.apply(null,F(i,j,m))};k.attr=function(m,l){if(typeof l=="function")for(var r=0;r<i.length;r++)d(i[r],m,l.call(k,j[r],r));else for(r=0;r<i.length;r++)d(i[r],m,l);return k};k.style=function(m,l,r){if(arguments.length<3)r=null;if(typeof l=="function")for(var p=0;p<i.length;p++)b(i[p],m,l.call(k,j[p],p),r);else for(p=0;p<i.length;p++)b(i[p],m,l,r);return k};k.text=function(m){if(typeof m=="function")for(var l=
0;l<i.length;l++)a(i[l],m.call(k,j[l],l));else for(l=0;l<i.length;l++)a(i[l],m);return k};return k};return f}function H(c){return function(g){return 1-c(1-g)}}function I(c){return function(g){return 0.5*(g<0.5?c(2*g):2-c(2-2*g))}}function R(){return t}function E(c){return function(g){return Math.pow(g,c)}}function S(c){return 1-Math.cos(c*Math.PI/2)}function T(c){return c?Math.pow(2,10*(c-1))-0.0010:0}function U(c){return 1-Math.sqrt(1-c*c)}function V(c,g){var e;if(arguments.length<2)g=0.45;if(arguments.length<
1){c=1;e=g/4}else e=g/(2*Math.PI)*Math.asin(1/c);return function(d){return 1+c*Math.pow(2,10*-d)*Math.sin(-(d+e)*2*Math.PI/g)}}function W(c){c||(c=1.70158);return function(g){return g*g*((c+1)*g-c)}}function X(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+0.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+0.9375:7.5625*(c-=2.625/2.75)*c+0.984375}w.version="0.0.0";var u={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",
xmlns:"http://www.w3.org/2000/xmlns/"},resolve:function(c){return u.prefix[c]||null},qualify:function(c){var g=c.indexOf(":");return g<0?c:{space:u.prefix[c.substring(0,g)],local:c.substring(g+1)}}};w.dispatch=function(c){var g={};c.on=function(e,d){e=g[e]||(g[e]=[]);for(var b=0;b<e.length;b++)if(e[b].handler==d)return this;e.push({handler:d,on:true});return this};c.off=function(e,d){if(e=g[e])for(var b=0;b<e.length;b++){var a=e[b];if(a.handler==d){a.on=false;e.splice(b,1);break}}return this};c.dispatch=
function(e){var d=g[e.type];if(d){d=d.slice();for(var b=0;b<d.length;b++){var a=d[b];a.on&&a.handler.call(c,e)}}};return c};w.transform=function(){function c(d){var b=Object.create(g);b.data=function(a){if(typeof a=="function")e.push({impl:P,nodes:d,value:a});else d.data=a;return b};b.attr=function(a,f){e.push({impl:J,nodes:d,name:a,value:f});return b};b.style=function(a,f,h){e.push({impl:K,nodes:d,name:a,value:f,priority:arguments.length<3?null:h});return b};b.add=function(a,f){var h=[];e.push({impl:L,
nodes:d,results:h,name:a,value:f});return c(h)};b.remove=function(a){e.push({impl:M,nodes:d,expression:document.createExpression(a,u.resolve)});return b};b.value=function(a){e.push({impl:N,nodes:d,value:a});return b};b.text=function(a){b.remove("text()").add("#text",a);return b};b.select=function(a){var f=[];e.push({impl:O,nodes:d,results:f,expression:document.createExpression(a,u.resolve)});return c(f)};return b}var g={},e=[];g.apply=function(){for(var d=0,b=e.length;d<b;++d)e[d].impl();return g};
return c([document])};var s={};w.select=function(c){return x(c)};s={};var G=/([-0-9.]+)/;w.map=function(c){var g={},e,d;w.dispatch(g);g.from=function(b){if(!arguments.length)return e;e=b;return g};g.by=function(b){if(!arguments.length)return d;d=b;return g};g.apply=function(b){if(!arguments.length)b=g.dispatch;for(var a=[],f=[],h=[],o=[],q=0;q<c.length;q++){var v=c[q],z=x(d.call(g,v,q)),y=z.length();if(y)for(var n=0;n<y;n++){h.push(z.item(n));o.push(v)}else{a.push(null);f.push(v)}}v=[];z=x(e);q=0;
a:for(;q<z.length();q++){y=z.item(q);for(n=0;n<a.length;n++)if(a[n]===y)continue a;for(n=0;n<h.length;n++)if(h[n]===y)continue a;v.push(y)}a.length&&g.dispatch({type:"enter",target:x(a,f)});h.length&&g.dispatch({type:"update",target:x(h,o)});v.length&&g.dispatch({type:"exit",target:x(v)});return g};return g};var Y=E(2),Z=E(3),$={linear:function(){return R},poly:E,quad:function(){return Y},cubic:function(){return Z},sin:function(){return S},exp:function(){return T},circle:function(){return U},elastic:V,
back:W,bounce:function(){return X}},aa={"in":function(c){return c},out:H,"in-out":I,"out-int":function(c){return I(H(c))}};w.ease=function(c){var g=c.indexOf("-"),e=g>=0?c.substring(0,g):c;g=g>=0?c.substring(g+1):"in";return aa[g]($[e].apply(null,Array.prototype.slice.call(arguments,1)))}})(org.epheme);
