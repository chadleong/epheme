if(!org)var org={};if(!org.epheme)org.epheme={};
(function(q){function o(b,f,e){for(var c=0,d=b.length;c<d;++c)b[c].impl(f,e)}function x(b,f){var e=b.length,c=l.qualify(this.name),d=this.value,a=typeof d=="function"&&d;if(c.space)if(d==null)for(a=0;a<e;++a)b[a].removeAttributeNS(c.space,c.local);else if(a)for(a=0;a<e;++a){i[0]=f[a];var g=b[a],h=d.apply(null,i);h==null?g.removeAttributeNS(c.space,c.local):g.setAttributeNS(c.space,c.local,h)}else for(a=0;a<e;++a)b[a].setAttributeNS(c.space,c.local,d);else if(d==null)for(a=0;a<e;++a)b[a].removeAttribute(c);
else if(a)for(a=0;a<e;++a){i[0]=f[a];g=b[a];h=d.apply(null,i);h==null?g.removeAttribute(c):g.setAttribute(c,h)}else for(a=0;a<e;++a)b[a].setAttribute(c,d)}function y(b,f){var e=b.length,c=l.qualify(this.name),d=this.value,a=typeof d=="function"&&d,g=this.priority;if(d==null)for(a=0;a<e;++a)b[a].style.removeProperty(c);else if(a)for(a=0;a<e;++a){i[0]=f[a];var h=b[a],m=d.apply(null,i);m==null?h.style.removeProperty(c):h.style.setProperty(c,m,g)}else for(a=0;a<e;++a)b[a].style.setProperty(c,d,g)}function z(b,
f){var e=b.length,c=l.qualify(this.name),d=[];if(c.space)for(var a=0;a<e;++a)d.push(b[a].appendChild(document.createElementNS(c.space,c.local)));else if(c=="#text"){c=this.value;if(typeof c=="function"&&c)for(a=0;a<e;++a){i[0]=f[a];var g=b[a],h=c.apply(null,i);d.push(g.appendChild(document.createTextNode(h)))}else for(a=0;a<e;++a)d.push(b[a].appendChild(document.createTextNode(c)))}else for(a=0;a<e;++a)d.push(b[a].appendChild(document.createElement(c)));o(this.actions,d,f)}function A(b){for(var f=
b.length,e=this.expression,c=null,d,a=0;a<f;++a){c=e.evaluate(b[a],XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,c);for(var g=0,h=c.snapshotLength;g<h;g++){d=c.snapshotItem(g);d.parentNode.removeChild(d)}}}function B(b,f){var e=b.length,c=this.value;if(typeof c=="function"&&c)for(var d=0;d<e;++d){i[0]=f[d];var a=b[d],g=c.apply(null,i);a.nodeValue=g}else for(d=0;d<e;++d)b[d].nodeValue=c}function C(b,f){var e=[],c=[],d=b.length,a=this.expression,g=null,h,m;i.unshift(null);for(var p=0;p<d;++p){g=a.evaluate(b[p],
XPathResult.UNORDERED_NODE_ITERATOR_TYPE,g);h=f[p];for(var n=0;(m=g.iterateNext())!=null;n++){e.push(m);c.push(n)}i[1]=h;o(this.actions,e,c);e.length=0;c.length=0}i.shift()}function D(b,f){var e=this.value,c=b.length,d=e;if(typeof d=="function"){e=[];for(var a=0;a<c;++a){i[0]=f[a];e.push(d.apply(null,i))}}o(this.actions,b,e)}function E(b,f){for(var e=this.name,c=this.value,d=[],a=[],g=[],h=[],m=[],p=[],n={},k=0,r=b.length;k<r;++k){var u=b[k],j=e.evaluate(u,XPathResult.STRING_TYPE,null);console.log("node",
k,j);if(j!=null)n[j.stringValue]=u}b={};k=0;for(r=f.length;k<r;++k){e=f[k];i[0]=e;j=c.apply(null,i);console.log("data",k,j);if(j!=null)b[j]=e}for(j in b){e=b[j];if(j in n){g.push(n[j]);h.push(e)}else{d.push(document);a.push(e)}}for(j in n)if(!(j in b)){m.push(n[j]);p.push(null)}o(this.enterActions,d,a);o(this.actions,g,h);o(this.exitActions,m,p)}function v(b){return function(f){return 1-b(1-f)}}function w(b){return function(f){return 0.5*(f<0.5?b(2*f):2-b(2-2*f))}}function F(){return t}function s(b){return function(f){return Math.pow(f,
b)}}function G(b){return 1-Math.cos(b*Math.PI/2)}function H(b){return b?Math.pow(2,10*(b-1))-0.0010:0}function I(b){return 1-Math.sqrt(1-b*b)}function J(b,f){var e;if(arguments.length<2)f=0.45;if(arguments.length<1){b=1;e=f/4}else e=f/(2*Math.PI)*Math.asin(1/b);return function(c){return 1+b*Math.pow(2,10*-c)*Math.sin(-(c+e)*2*Math.PI/f)}}function K(b){b||(b=1.70158);return function(f){return f*f*((b+1)*f-b)}}function L(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+0.75:b<2.5/2.75?
7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375}q.version="0.0.0";var l={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},resolve:function(b){return l.prefix[b]||null},qualify:function(b){var f=b.indexOf(":");return f<0?b:{space:l.prefix[b.substring(0,f)],local:b.substring(f+1)}}};q.dispatch=function(b){var f={};b.on=function(e,c){e=f[e]||
(f[e]=[]);for(var d=0;d<e.length;d++)if(e[d].handler==c)return this;e.push({handler:c,on:true});return this};b.off=function(e,c){if(e=f[e])for(var d=0;d<e.length;d++){var a=e[d];if(a.handler==c){a.on=false;e.splice(d,1);break}}return this};b.dispatch=function(e){var c=f[e.type];if(c){c=c.slice();for(var d=0;d<c.length;d++){var a=c[d];a.on&&a.handler.call(b,e)}}};return b};q.transform=function(){function b(c){var d=Object.create(f);d.data=function(a){a={impl:D,value:a,actions:[]};c.push(a);return b(a.actions)};
d.key=function(a,g){a={impl:E,name:document.createExpression(a,l.resolve),value:g,actions:[],enterActions:[],exitActions:[]};c.push(a);g=b(a.actions);g.enter=b(a.enterActions);g.exit=b(a.exitActions);return g};d.attr=function(a,g){c.push({impl:x,name:a,value:g});return d};d.style=function(a,g,h){c.push({impl:y,name:a,value:g,priority:arguments.length<3?null:h});return d};d.add=function(a,g){a={impl:z,name:a,value:g,actions:[]};c.push(a);return b(a.actions)};d.remove=function(a){c.push({impl:A,expression:document.createExpression(a,
l.resolve)});return d};d.value=function(a){c.push({impl:B,value:a});return d};d.text=function(a){d.remove("text()").add("#text",a);return d};d.select=function(a){a={impl:C,expression:document.createExpression(a,l.resolve),actions:[]};c.push(a);return b(a.actions)};return d}var f={},e=[];f.apply=function(){i.unshift(null);o(e,[document],M);i.shift();return f};return b(e)};var i=[],M={},N=s(2),O=s(3),P={linear:function(){return F},poly:s,quad:function(){return N},cubic:function(){return O},sin:function(){return G},
exp:function(){return H},circle:function(){return I},elastic:J,back:K,bounce:function(){return L}},Q={"in":function(b){return b},out:v,"in-out":w,"out-int":function(b){return w(v(b))}};q.ease=function(b){var f=b.indexOf("-"),e=f>=0?b.substring(0,f):b;f=f>=0?b.substring(f+1):"in";return Q[f](P[e].apply(null,Array.prototype.slice.call(arguments,1)))}})(org.epheme);
