<html>
  <head>
    <title>Hello, data!</title>
    <script type="text/javascript" src="../../epheme.js"></script>
    <style type="text/css">

body, td {
  font: 14px Helvetica Neue;
  text-rendering: optimizeLegibility;
  margin: 1em;
}

table {
  border-collapse: collapse;
  border-spacing: 0;
  margin-top: .5em;
}

td {
  border: solid 1px #ccc;
  padding: 4px;
  color: #ccc;
  text-align: center;
}

    </style>
  </head>
  <body>
    Your lucky numbers are:<br>
    <table>
      <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
    </table>
    <script type="text/javascript">

var eo = org.epheme;

var data = [];

for (var i = 0; i < 10; i++) {
  for (var j = 0, a = []; j < 10; j++) {
    a.push(~~(Math.random() * 100));
  }
  data.push(a);
}

var t = eo.transform()
  .select("//tr")
    .data(data)
  .select("td")
    .style("background-color", function(d) { return "hsl(0,50%," + d + "%)"; })
    .text(function(d) { return d; })
  .apply();

function refresh() {
  for (var i = 0; i < data.length; i++) {
    var z = data[i], d = z.shift();
    z.push(~~(Math.random() * 100));
  }
  t.apply();
}

// setInterval(refresh, 250);

    </script>
  </body>
</html>
